<!DOCTYPE html><html><head><link rel=manifest href=/manifest.json><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><title>#8 第八期 - 我的 ElasticSearch 進化之旅 | StarBugs Weekly 星巴哥技術週刊</title><meta name="description" content="#8 第八期 - 我的 ElasticSearch 進化之旅"><meta name="keywords" content=""><meta name="author" content="StarBugs Weekly Editors"><meta name="copyright" content="StarBugs Weekly Editors"><meta name="format-detection" content="telephone=no"><link rel="shortcut icon" href="/img/favicon.ico"><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css"><meta http-equiv="x-dns-prefetch-control" content="on"><link rel="canonical" href="https://weekly.starbugs.dev/2019/12/24/08-elastic-evolution/"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:title" content="#8 第八期 - 我的 ElasticSearch 進化之旅"><meta name="twitter:description" content="#8 第八期 - 我的 ElasticSearch 進化之旅"><meta name="twitter:image" content="https://weekly.starbugs.dev/img/008cover.jpg"><meta property="og:type" content="article"><meta property="og:title" content="#8 第八期 - 我的 ElasticSearch 進化之旅"><meta property="og:url" content="https://weekly.starbugs.dev/2019/12/24/08-elastic-evolution/"><meta property="og:site_name" content="StarBugs Weekly 星巴哥技術週刊"><meta property="og:description" content="#8 第八期 - 我的 ElasticSearch 進化之旅"><meta property="og:image" content="https://weekly.starbugs.dev/img/008cover.jpg"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link rel="prev" title="#9 第九期 - 今年的最後一天，星巴哥裡有你有我" href="https://weekly.starbugs.dev/2019/12/31/09-starbugs-is-around-us/"><link rel="next" title="#7 第七期 - 開源專案的名模生死鬥" href="https://weekly.starbugs.dev/2019/12/17/07-open-source-projects-fighting/"><link rel="dns-prefetch" href="https://www.google-analytics.com"><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-151536743-1', 'auto');
ga('send', 'pageview');
</script><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"cookieDomain":"https://xxx/","msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简"},
  highlight_copy: 'false',
  highlight_lang: 'true',
  highlight_shrink: 'false',
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  },
  bookmark: {
    title: 'Bookmark',
    message_prev: 'Press',
    message_next: 'to bookmark this page'
  },
  runtime_unit: 'days',
  copyright: undefined,
  copy_copyright_js: false
  
}</script><link rel="alternate" href="/atom.xml" title="StarBugs Weekly 星巴哥技術週刊" type="application/atom+xml">
</head><body><div id="header"> <div id="page-header"><span class="pull-left" id="blog_name"><a class="blog_title" id="site-name" href="/">StarBugs Weekly 星巴哥技術週刊</a></span><i class="fa fa-bars fa-fw toggle-menu pull-right close" aria-hidden="true"></i><span class="pull-right menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="https://medium.com/starbugs" target="_blank" rel="noopener"><i class="fa-fw fa fa-medium"></i><span> 技術專欄</span></a></div><div class="menus_item"><a class="site-page" href="https://www.facebook.com/starbugsweekly" target="_blank" rel="noopener"><i class="fa-fw fa fa-facebook"></i><span> 粉絲專頁</span></a></div><div class="menus_item"><a class="site-page" href="/atom.xml"><i class="fa-fw fa fa-rss"></i><span> RSS</span></a></div><script>document.body.addEventListener('touchstart', function(){ });</script></div></span><span class="pull-right" id="search_button"></span></div></div><div id="mobile-sidebar"><div id="menu_mask"></div><div id="mobile-sidebar-menus"><div class="mobile_author_icon"><img class="lozad avatar_img" src="/img/logo.jpg" onerror="onerror=null;src='/img/friend_404.gif'"></div><div class="mobile_post_data"><div class="mobile_data_item is_center"><div class="mobile_data_link"><a href="/archives/"><div class="headline">Articles</div><div class="length_num">89</div></a></div></div><div class="mobile_data_item is_center">      <div class="mobile_data_link"><a href="/tags/"><div class="headline">Tags</div><div class="length_num">2</div></a></div></div></div><hr><div class="menus_items"><div class="menus_item"><a class="site-page" href="https://medium.com/starbugs" target="_blank" rel="noopener"><i class="fa-fw fa fa-medium"></i><span> 技術專欄</span></a></div><div class="menus_item"><a class="site-page" href="https://www.facebook.com/starbugsweekly" target="_blank" rel="noopener"><i class="fa-fw fa fa-facebook"></i><span> 粉絲專頁</span></a></div><div class="menus_item"><a class="site-page" href="/atom.xml"><i class="fa-fw fa fa-rss"></i><span> RSS</span></a></div><script>document.body.addEventListener('touchstart', function(){ });</script></div></div></div><div id="body-wrap"><div id="content-outer"><div class="full_page" id="nav"><div class="nav_bg" style="background-image: url(/img/banner.jpeg)"></div><div id="site-info"><div id="site-title"><span class="blogtitle"><img class="bannerLogo" src="/img/logo.png"></span><!--= page.title || page.tag || page.category || config.title--></div><div id="site-sub-title" style="display: flex;justify-content: center;"><span class="subtitle" style="width: 75%; max-width: 900px;">StarBugs Weekly 由一群在星空般的 Bug 中求生存的開發者所創立的週刊。每週二我們會撰寫一篇原創文章與蒐集一系列國內外的好文與大家分享。內容包含 Web 前端、後端、DevOps、產品開發、專案管理 ... 等等，一切跟產品開發有關的知識。</span></div><div id="site-social-icons"><a class="social-icon" href="https://www.facebook.com/starbugsweekly" target="_blank"><i class="fa fa-facebook"></i></a><a class="social-icon" href="https://medium.com/starbugs" target="_blank"><i class="fa fa-medium"></i></a><a class="social-icon" href="/atom.xml" target="_blank"><i class="fa fa-rss"></i></a></div></div><div class="scroll-down"><i class="fa fa-angle-down scroll-down-effects"></i></div><div class="subscription"><span>SUBSCRIBE WITH MAIL</span><!-- Begin Mailchimp Signup Form -->
<link href="//cdn-images.mailchimp.com/embedcode/horizontal-slim-10_7.css" rel="stylesheet" type="text/css">
<style type="text/css">
	#mc_embed_signup{clear:left; font:14px Helvetica,Arial,sans-serif; width:100%;}
	/* Add your own Mailchimp form style overrides in your site stylesheet or in this style block.
	   We recommend moving this block and the preceding CSS link to the HEAD of your HTML file. */
</style>
<div id="mc_embed_signup">
<form action="https://gmail.us5.list-manage.com/subscribe/post?u=a55f7ec85b3c017297ef42d78&amp;id=56f46005ce" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" style="margin: 0px 24px" target="_blank" novalidate>
    <div id="mc_embed_signup_scroll">
	
	<input type="email" value="" name="EMAIL" class="email" id="mce-EMAIL" placeholder="email address" required>
    <!-- real people should not fill this in and expect good things - do not remove this or risk form bot signups-->
    <div style="position: absolute; left: -5000px;" aria-hidden="true"><input type="text" name="b_a55f7ec85b3c017297ef42d78_56f46005ce" tabindex="-1" value=""></div>
    <div class="clear">
        <input type="submit" value="Subscribe" name="subscribe" id="mc-embedded-subscribe" class="button" style="background: #E35751"></div>
    </div>
</form>
</div>

<!--End mc_embed_signup--><span>No spam, ever. We'll never share your address and you can opt out at any time</span></div></div><div class="layout layout_post" id="content-inner"><article id="post"><h1>#8 第八期 - 我的 ElasticSearch 進化之旅</h1><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> Created on 2019-12-24</time><div class="article-container" id="post-content"><h2 id="本週專欄"><a href="#本週專欄" class="headerlink" title="本週專欄"></a>本週專欄</h2><h3 id="我的-ElasticSearch-進化之旅"><a href="#我的-ElasticSearch-進化之旅" class="headerlink" title="我的 ElasticSearch 進化之旅"></a><a href="https://medium.com/starbugs/%E6%88%91%E7%9A%84-elasticsearch-log-%E6%94%B6%E9%9B%86%E4%B9%8B%E6%97%85-39016c3b9a29" target="_blank" rel="noopener">我的 ElasticSearch 進化之旅</a></h3><p>自己第一次接觸到 ElasticSearch 好像是六七年前了(遠目) 一路走來一直都是使用它來儲存 Log，畢竟 ELK 可是窮人版的 Splunk，這幾年來好像也沒有可以跟它匹敵的對手出現 (最近好像有個新的挑戰者受到不小的關注程度叫做 Grafana Loki)，而對他的印象從一開始到現在都沒有變過，就是…它相當地吃資源，不管是在 CPU, Memory 或是 Disk 上，而且隨著 Log 量級的成長會需要一直去升級和調整它，不然它一發起脾氣來可是很恐怖的，而今天這篇文章主要想要分享從我一開始架設 ElasticSearch 到目前為止的心得，並且會花比較多的篇幅講解目前的架設方式，總共有四個階段，用一句話來總結就是如何讓花費越來越低</p>
<h2 id="神-Q-超人"><a href="#神-Q-超人" class="headerlink" title="神 Q 超人"></a>神 Q 超人</h2><h3 id="Make-Your-Own-create-react-app-Templates"><a href="#Make-Your-Own-create-react-app-Templates" class="headerlink" title="Make Your Own create-react-app Templates"></a><a href="https://dev.to/pallymore/make-your-own-create-react-app-templates-feo" target="_blank" rel="noopener">Make Your Own create-react-app Templates</a></h3><p>不曉得大家都怎麼創建一個新的 React 專案，以筆者來說都會先建立一個基本的專案，裡面有 package.json 和 webpack.config.js 等等，可以在 <code>npm i</code> 後直接 run 起來的那種，但每次也都還要再刪刪改改，把多餘的依賴 library 拿掉。而這些都只是過去式了！新版的 create-react-app 增加了 template 的功能！透過 template 的設置，你可以定義出自己的模板，還可以用 <code>publish</code> 和全世界分享你出色的 template！</p>
<h3 id="GraphQL-vs-REST-a-vending-machine-example"><a href="#GraphQL-vs-REST-a-vending-machine-example" class="headerlink" title="GraphQL vs REST - a vending machine example"></a><a href="https://dev.to/graphqleditor/graphql-vs-rest-a-vending-machine-example-1894" target="_blank" rel="noopener">GraphQL vs REST - a vending machine example</a></h3><p>記得兩個禮拜前的那篇 Gatsby 專欄嗎？在文章中有簡單解釋 GraphQL 是什麼和它的用法，如果大家覺得意猶未盡或是對 GraphQL 產生了什麼特別的情愫，那就可以參考這篇文章，看看如何從自動販賣機的使用角度解釋 GraphQL 和 REST 之間的不同！</p>
<h3 id="CSS-Grid-Layout-vs-CSS-Frameworks-When-To-Use-What"><a href="#CSS-Grid-Layout-vs-CSS-Frameworks-When-To-Use-What" class="headerlink" title="CSS Grid Layout vs CSS Frameworks: When To Use What"></a><a href="https://dzone.com/articles/css-grid-layout-vs-css-frameworks-when-to-use-what" target="_blank" rel="noopener">CSS Grid Layout vs CSS Frameworks: When To Use What</a></h3><p>Grid 的降臨，讓許多人都產生了「該不該繼續使用 CSS 的 Frameworks（例如：bootstrap）」的疑惑，因為撰寫原生的 CSS 能更將網頁玩轉在自己手裡，也不需要在使用上受限於 Frameworks 的 12 或 24 格，但是在放手之前又很捨不得 Frameworks 帶來的那些美好時光，到底要怎麼在兩者之間作出抉擇呢？</p>
<h2 id="Larry-Lu"><a href="#Larry-Lu" class="headerlink" title="Larry Lu"></a>Larry Lu</h2><h3 id="Design-patterns-in-modern-JavaScript-development"><a href="#Design-patterns-in-modern-JavaScript-development" class="headerlink" title="Design patterns in modern JavaScript development"></a><a href="https://levelup.gitconnected.com/design-patterns-in-modern-javascript-development-ec84d8be06ca" target="_blank" rel="noopener">Design patterns in modern JavaScript development</a></h3><p>隨著程式越寫越久、專案越寫越大，一定都會遇到程式碼難以管理的情況，尤其身為團隊的一份子又要常常要接手同事的扣，這時候就需要 Design Pattern 了，這篇用圖解介紹了 Single、Observer、Facade 三種 pattern，因為設計模式這東西是不分語言的，所以即便不寫 JS 還是可以看看～</p>
<h3 id="Why-is-processing-a-sorted-array-faster-than-processing-an-unsorted-array"><a href="#Why-is-processing-a-sorted-array-faster-than-processing-an-unsorted-array" class="headerlink" title="Why is processing a sorted array faster than processing an unsorted array?"></a><a href="https://stackoverflow.com/questions/11227809/why-is-processing-a-sorted-array-faster-than-processing-an-unsorted-array" target="_blank" rel="noopener">Why is processing a sorted array faster than processing an unsorted array?</a></h3><p>這篇 StackOverflow 上的回答講 Branch Prediction 講得超好！非常值得一讀。原發問者的問題是他寫了一個程式用來把 array 中大於 128 的數字加總，但他發現把陣列排序過後加總速度會快上許多，超神奇 der</p>
<h3 id="「管理開源專案最難的不是技術而是人。」Homebrew-十年開發故事"><a href="#「管理開源專案最難的不是技術而是人。」Homebrew-十年開發故事" class="headerlink" title="「管理開源專案最難的不是技術而是人。」Homebrew 十年開發故事"></a><a href="https://link.medium.com/EWBDrM69B2" target="_blank" rel="noopener">「管理開源專案最難的不是技術而是人。」Homebrew 十年開發故事</a></h3><p>如果你也是用 Mac 進行開發的話，一定有用過 Homebrew 這個 package manager，而且它也曾經是 Github 上貢獻者最多的專案，一起來看看 Homebrew 這十年是怎麼走過來的吧</p>
<h2 id="LukaTW"><a href="#LukaTW" class="headerlink" title="LukaTW"></a>LukaTW</h2><h3 id="Node-js-是如何和-libuv-以及-v8-一起合作的"><a href="#Node-js-是如何和-libuv-以及-v8-一起合作的" class="headerlink" title="Node.js 是如何和 libuv 以及 v8 一起合作的"></a><a href="https://juejin.im/post/5dd0b1fff265da0bae519ed4" target="_blank" rel="noopener">Node.js 是如何和 libuv 以及 v8 一起合作的</a></h3><p>該文章當前使用的nodejs版本是 v13.1.0 (網上那些分析 nodejs 源碼的文章不寫清基於的版本都是耍流氓)，非常幹貨的一篇文章，請耐心閱讀，否則建議收藏。</p>
<h3 id="讀-Koa2-源碼後的一些思考與實現"><a href="#讀-Koa2-源碼後的一些思考與實現" class="headerlink" title="讀 Koa2 源碼後的一些思考與實現"></a><a href="https://juejin.im/post/5decf130f265da339565d40e" target="_blank" rel="noopener">讀 Koa2 源碼後的一些思考與實現</a></h3><p>本文目的主要是讓大家學到一個 koa2 的基本流程，簡單實現 koa2，再去讀源碼有一個清晰的思路。實際源碼中還有很多優秀的值得我們學習的點。</p>
<h3 id="What’s-New-for-Node-js-in-2020"><a href="#What’s-New-for-Node-js-in-2020" class="headerlink" title="What’s New for Node.js in 2020"></a><a href="https://juejin.im/post/5df7665ee51d455819022a17" target="_blank" rel="noopener">What’s New for Node.js in 2020</a></h3><p>NodeJS 13版本有哪些新東西? 一些亮點：ECMAScript模塊、WebAssembly支持、Diagnostic report 診斷報告、對日期, 時間, 數字與貨幣格式的完全本地化支持、QUIC協議支持、V8 JavaScript引擎性能更新。在我們一頭紮進這些特性的細節之前, 讓我們先從NodeJS的release計劃中看看有什麽值得期待的.</p>
<h2 id="smalltown"><a href="#smalltown" class="headerlink" title="smalltown"></a>smalltown</h2><h3 id="8-great-pytest-plugins"><a href="#8-great-pytest-plugins" class="headerlink" title="8 great pytest plugins"></a><a href="https://opensource.com/article/18/6/pytest-plugins" target="_blank" rel="noopener">8 great pytest plugins</a></h3><p>相信應該有不少人會使用 pytest 來撰寫自動化測試，本篇文章介紹八大好用的 Plugin，1) pytest-sugar 2) pytest-cov 3) pytest-picked 4) pytest-instafail 5) pytest-tldr 6) pytest-xdist 7) pytest-django 8) django-test-plus，有興趣的人趕緊點開來看詳細介紹！</p>
<h3 id="docker-compose-vim"><a href="#docker-compose-vim" class="headerlink" title="docker-compose.vim"></a><a href="https://github.com/skanehira/docker-compose.vim" target="_blank" rel="noopener">docker-compose.vim</a></h3><p>一個有趣的小專案，讓 vim 可以直接管理 docker compose 的 plubin，僅獻給離不開 vim 的開發人員們XD</p>
<h3 id="Deduping-HA-Prometheus-Samples-in-Cortex"><a href="#Deduping-HA-Prometheus-Samples-in-Cortex" class="headerlink" title="Deduping HA Prometheus Samples in Cortex"></a><a href="https://grafana.com/blog/2019/10/03/deduping-ha-prometheus-samples-in-cortex/" target="_blank" rel="noopener">Deduping HA Prometheus Samples in Cortex</a></h3><p>應該有不少人都有在使用 Prometheus，以往常常會被問到，假如監控者本身也掛掉那該怎麼辦呢？！所以監控者本身的 HA 也是不可忽視的，此篇文章介紹如何利用 Cortex 來讓 Prometheus 達成 HA</p>
<h2 id="StarBugs-Weekly"><a href="#StarBugs-Weekly" class="headerlink" title="StarBugs Weekly"></a>StarBugs Weekly</h2><p>StarBugs Weekly 由一群不寫文章就會想要亂花錢，但是又沒有那麼多錢，只好繼續寫文章的開發者所創立。<br>內容包含 Web 前端、中端、後端、DevOps、產品開發、精實創業，一切跟產品有關的知識，都是我們的守備範圍！</p>
<p>Curators:</p>
<ul>
<li><a href="https://medium.com/@gqsm" target="_blank" rel="noopener">@GQSM</a> - Hi！我是神 Q 超人，蹲得越久，腳就越酸。</li>
<li><a href="https://medium.com/@larry850806" target="_blank" rel="noopener">@Larry850806</a> - 我是 Larry，傳說中的 0.1 倍工程師！</li>
<li><a href="https://medium.com/@LukaTW" target="_blank" rel="noopener">@LukaTW</a> - 一名全身都是死角的工程師。</li>
<li><a href="https://medium.com/@smalltown" target="_blank" rel="noopener">@smalltown</a> - 熱愛鑽研各種可以提升雲端服務品質及增進團隊開發效率的開源技術</li>
</ul>
<h2 id="Feedback"><a href="#Feedback" class="headerlink" title="Feedback"></a>Feedback</h2><p>想看什麼內容，告訴我們！ <a href="https://starbugs.typeform.com/to/mAk2Bk" target="_blank" rel="noopener">點我回饋意見</a></p>
</div></article><nav class="pagination_post" id="pagination"><div class="prev-post pull-left"><a href="/2019/12/31/09-starbugs-is-around-us/"><img class="prev_cover lozad" data-src="/img/009cover.jpg" onerror="onerror=null;src='/img/404.jpg'"><div class="label">Previous Post</div><div class="prev_info"><span>#9 第九期 - 今年的最後一天，星巴哥裡有你有我</span></div></a></div><div class="next-post pull-right"><a href="/2019/12/17/07-open-source-projects-fighting/"><img class="next_cover lozad" data-src="/img/007cover.jpg" onerror="onerror=null;src='/img/404.jpg'"><div class="label">Next Post</div><div class="next_info"><span>#7 第七期 - 開源專案的名模生死鬥</span></div></a></div></nav></div></div><footer style="background-image: url(/img/banner.jpeg)"><div id="footer"><div class="copyright">&copy;2019 - 2021 By StarBugs Weekly Editors</div></div></footer></div><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script src="https://cdn.jsdelivr.net/npm/js-cookie@2/src/js.cookie.min.js"></script><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/nightshift.js"></script><script color="0,0,255" opacity="0.7" zIndex="-1" count="39" src="https://cdn.jsdelivr.net/gh/jerryc127/CDN/js/canvas-nest.js"></script><script src="/js/tw_cn.js"></script><script>translateInitilization()
</script><script src="https://cdn.jsdelivr.net/npm/lozad/dist/lozad.min.js"></script><script>const observer = lozad(); // lazy loads elements with default selector as '.lozad'
observer.observe();
</script><script>if ('serviceWorker' in navigator) {
  navigator.serviceWorker.register('/sw.js?t=1626098635131')
    .then(function () {console.log('ServiceWorker Register Successfully.')})
    .catch(function (e) {console.error(e)});
}
</script></body></html>